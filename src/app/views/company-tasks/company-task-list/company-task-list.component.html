<aw-view-base>
  <aw-view-header [breadcrumb]="breadcrumb">Lista de tarea</aw-view-header>

  <aw-card>
    <!-- toolbar -->
    <div class="d-flex mb-2">
      <span class="me-auto">
        <a [routerLink]="siteUrls.companyTasks.create" class="btn btn-sm btn-outline-success">
          <span class="fa-solid fa-list-check"></span> Crear tarea
        </a>
      </span>

      <span>
        <aw-table-input-search
          [tableHeaderConfig]="tableHeaderConfig"
          [apiResult]="apiResult"
          (clickClean)="handleClickClean($event)"></aw-table-input-search>
      </span>
    </div>
    <!-- end toolbar -->

    <!-- table -->
    <aw-table [apiResult]="apiResult" [loading]="loading">
      <thead awThead>
        <tr
          awTableHeader
          [tableHeaderConfig]="tableHeaderConfig"
          [apiResult]="apiResult"
          (clickOrdering)="handleReloadData()"></tr>
      </thead>

      <tbody awTbody *ngIf="apiResult">
        <tr *ngFor="let task of apiResult.items" (click)="handleSelectItem(task)" class="cursor-pointer">
          <td>
            <aw-badge [background]="task.background" [color]="task.color" [name]="task.name"></aw-badge>
          </td>
          <td>{{ task.created | datetime: dateShort }}</td>
          <td [innerHTML]="task.active | boolToIcon"></td>
          <td>
            <aw-dot [color]="task.background"></aw-dot>
          </td>
          <td>
            <aw-dot [color]="task.color"></aw-dot>
          </td>
        </tr>
      </tbody>
    </aw-table>
    <!-- end table -->

    <!-- pagination -->
    <aw-pagination
      *ngIf="apiResult"
      [apiResult]="apiResult"
      (changePage)="handleReloadData()"
      (changePageListNumber)="handleReloadData()">
    </aw-pagination>
    <!-- end pagination -->
  </aw-card>
</aw-view-base>
