<aw-view-base>
  <aw-view-header>Control de tiempos</aw-view-header>

  <aw-card>
    <!-- filters -->
    <div class="d-flex justify-content-center">
      <div class="col-3">
        <select
          [(ngModel)]="yearSelected"
          (change)="handleChangeFilters()"
          class="form-select"
          aria-label="Default select example">
          <option *ngFor="let year of yearsSelector" [selected]="year.selected" [ngValue]="year">
            {{ year.value }}
          </option>
        </select>
      </div>

      <div class="col-3">
        <select
          [(ngModel)]="monthSelected"
          (change)="handleChangeFilters()"
          class="form-select"
          aria-label="Default select example">
          <option *ngFor="let month of monthsSelector" [selected]="month.selected" [ngValue]="month">
            {{ month.value }}
          </option>
        </select>
      </div>
    </div>
    <!-- end filters -->

    <!-- button state -->
    <div class="d-flex justify-content-center mt-4">
      <ng-container *ngIf="timeState === timeStates.open">
        <aw-btn-loading
          (eventClick)="handleFinished()"
          [loading]="loadingTimeState"
          btnIcon="fa-solid fa-flag-checkered"
          btnText="Finalizar"
          btnClass="btn btn-outline-warning"></aw-btn-loading>
      </ng-container>

      <ng-container *ngIf="timeState === timeStates.close">
        <aw-btn-loading
          (eventClick)="handleStart()"
          [loading]="loadingTimeState"
          btnIcon="fa-solid fa-hourglass-start"
          btnText="Iniciar"
          btnClass="btn btn-success"></aw-btn-loading>
      </ng-container>
    </div>
    <!-- end button state -->
  </aw-card>

  <div class="mt-2"></div>

  <!-- times -->
  <aw-card>
    <ng-container *ngFor="let progressStacked of progressStackedCollection">
      <ng-container *ngIf="!loadingData">
        <aw-progress-stacked [progressStackedCollection]="progressStacked"></aw-progress-stacked>
      </ng-container>

      <ng-container *ngIf="loadingData">
        <aw-spinner [loading]="loadingData" [size]="100"></aw-spinner>
      </ng-container>
    </ng-container>
  </aw-card>
  <!-- end times -->
</aw-view-base>
